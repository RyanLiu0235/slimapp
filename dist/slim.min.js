!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.slim=n()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e,n=(function(e,n){e.exports=function(){var e=function e(n,t,r){t=t||{},r=r||[],this.tagName=n,this.props=t,this.key=t.key,this.children=r;for(var i,o=0,f=0;f<r.length;f++)(i=r[f])instanceof e&&(o+=i.count),o++;this.count=o},n=function e(n){for(var t,r,i=document.createElement(n.tagName),o=n.props,f=Object.keys(o),a=0;a<f.length;a++)t=f[a],"function"==typeof(r=o[t])?t in i&&(i[t]=r):i.setAttribute(t,r);for(var s,c=n.children,u=0;u<c.length;u++)if(s=c[u],["string","number"].indexOf(typeof s)>-1){var p=document.createTextNode(s);i.appendChild(p)}else{var l=e(s);i.appendChild(l)}return i};function t(e,n){for(var t={},i=[],o=0,f=e.length;o<f;o++){var a=e[o],s=r(a,n);s?t[s]=o:i.push(a)}return{keyIndex:t,free:i}}function r(e,n){if(e&&n)return"string"==typeof n?e[n]:n(e)}var i=function(e,n,i){for(var o,f,a=t(e,i),s=t(n,i),c=s.free,u=a.keyIndex,p=s.keyIndex,l=[],h=[],d=0,v=0;d<e.length;){if(o=e[d],f=r(o,i))if(p.hasOwnProperty(f)){var y=p[f];h.push(n[y])}else h.push(null);else{var g=c[v++];h.push(g||null)}d++}var m=h.slice(0);for(d=0;d<m.length;)null===m[d]?(O(d),P(d)):d++;for(var E=d=0;d<n.length;){o=n[d],f=r(o,i);var R=m[E],b=r(R,i);if(R)if(f===b)E++;else if(u.hasOwnProperty(f)){var k=r(m[E+1],i);k===f?(O(d),P(E),E++):x(d,o)}else x(d,o);else x(d,o);d++}function O(e){var n={index:e,type:0};l.push(n)}function x(e,n){var t={index:e,item:n,type:1};l.push(t)}function P(e){m.splice(e,1)}return{moves:l,children:h}},o={isString:function(e){return"string"==typeof e}},f={REPLACE:"REPLACE",REORDER:"REORDER",PROPS:"PROPS",TEXT:"TEXT"};function a(e,t){var r=t.patch;switch(t.type){case f.REPLACE:var i=o.isString(r)?r:n(r);e.parentNode.replaceChild(i,e);break;case f.REORDER:!function(e,t){for(var r,i,o,f,a=e.childNodes,s=0;s<t.length;s++)switch(r=t[s],i=r.index,o=r.item,f=a[i],r.type){case 0:e.removeChild(f);break;case 1:var c=n(o);e.insertBefore(c,f)}}(e,r.moves);break;case f.PROPS:!function(e,n){for(var t,r,i=Object.keys(n),o=0;o<i.length;o++)t=i[o],"function"==typeof(r=n[t])||(!1===r||void 0===r?e.removeAttribute(t):e.setAttribute(t,r))}(e,r);break;case f.TEXT:var a=document.createTextNode(r);e.parentNode.replaceChild(a,e)}}return{h:function(n,t,r){return new e(n,t,r)},render:n,diff:function(e,n){var t={};return function e(n,t,r,a){var s=[];if(null===t);else if(o.isString(n)&&o.isString(t))n!==t&&s.push({type:f.TEXT,patch:t});else if(n.tagName===t.tagName&&n.key===t.key){for(var c,u=n.props,p=t.props,l=Object.assign({},u,p),h=Object.keys(l),d={},v=0;v<h.length;v++)c=h[v],p[c]!==u[c]&&(d[c]=p[c]);Object.keys(d).length>0&&s.push({type:f.PROPS,patch:d});var y=n.children,g=i(y,t.children,"key"),m=g.moves,E=g.children;m.length>0&&s.push({type:f.REORDER,patch:{moves:m}});for(var R,b,k=null,O=r,x=0;x<y.length;x++)R=y[x],b=E[x],O+=k&&k.count?k.count:1,e(R,b,O,a),k=R}else s.push({type:f.REPLACE,patch:t});s.length>0&&(a[r]=s)}(e,n,0,t),t},patch:function(e,n){!function e(n,t,r){var i=t[r];if(!o.isString(n))for(var f=n.childNodes,s=0;s<f.length;s++)e(f[s],t,++r);if(i)for(var c=0;c<i.length;c++)a(n,i[c])}(e,n,0)}}}()}(e={exports:{}},e.exports),e.exports),t=n.h,r=n.render;return{app:function(e,n,t,i){var o=function(e,n){var t,r={};for(var i in e)t=e[i],function(e,t){r[e]=function(e){t(e)(n),s()}}(i,t);return r}(n,t),f=e(o,t),a=r(f);return i.appendChild(a),o;function s(){var n=a;f=e(o,t),a=r(f),i.removeChild(n),i.appendChild(a)}},h:t}});
