!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.slim=n()}(this,function(){"use strict";var e,n=(function(e,n){n.getType=function(e){return typeof e},n.isString=function(e){return"string"===n.getType(e)},n.isUndefined=function(e){return void 0===e}}(e={exports:{}},e.exports),e.exports);n.getType,n.isString,n.isUndefined;var t=function e(n,t,i){t=t||{},i=i||[],this.tagName=n,this.props=t,this.key=t.key,this.children=i;for(var r,o=0,f=0;f<i.length;f++)(r=i[f])instanceof e?o+=r.count:i[f]=""+r,o++;this.count=o};return{app:function(e,t,i,r){var o=function(e,n){var t,i={};for(var r in e)t=e[r],function(e,t){i[e]=function(e){t(e)(n),c()}}(r,t);return i}(t,i),f=null,s=r&&r.childNodes[0]||null,u=!0,d=[];return c(),o;function c(){var t;for(s=function e(t,i,r,o){if(null===r)i=t.insertBefore(a(o),i);else if(n.isString(r)&&n.isString(o))r!==o&&(t.textContent=o);else if(r.tagName&&r.tagName===o.tagName){!function(e,t,i){for(var r,o=Object.assign({},t,i),f=Object.keys(o),s={},c=0;c<f.length;c++)"key"!==(r=f[c])&&i[r]!==t[r]&&(s[r]=i[r]);var a,l,p=Object.keys(s);if(p.length>0)for(var h=0;h<p.length;h++)a=p[h],l=s[a],"function"===n.getType(l)?e[a]=l:!1===l||n.isUndefined(l)?e.removeAttribute(a):e.setAttribute(a,l);var g=u?i.oncreate:i.onupdate;g&&d.push(function(){g(e,t)})}(i,r.props,o.props);for(var f=r.children,s=o.children,c=[],p={},h=[],g=0;g<f.length;g++){c.push(i.childNodes[g]);var v=f[g].key;n.isUndefined(v)||(p[v]=[f[g],i.childNodes[g]])}for(var y=0,m=0;y<s.length;){var N=f[m],k=s[y];if(n.isUndefined(N))e(i,null,null,k),y++;else{var x=N.key,T=k.key;n.isUndefined(x)?(n.isUndefined(T)&&(e(i,i.childNodes[m],N,k),y++),m++):(x===T?(e(i,i.childNodes[m],N,k),m++):p[T]?e(i,i.insertBefore(p[T][1],c[m]),p[T][0],k):e(i,c[m],null,k),y++,h.push(T))}}for(;m<f.length;)n.isUndefined(f[m].key)&&l(i,c[m],f[m]),m++;for(var v in p)if(-1===h.indexOf(+v)){var b=p[v];l(i,b[1],b[0])}}else{var U=a(o);t.insertBefore(U,i),t.removeChild(i),i=U}return i}(r,s,f,f=e(o,i)),u=!1;t=d.pop();)t()}function a(e){if(n.isString(e))return document.createTextNode(e);for(var t,i,r=document.createElement(e.tagName),o=e.props,f=Object.keys(o),s=0;s<f.length;s++)i=o[t=f[s]],"key"!==t&&("oncreate"===t?d.push(void i(r)):"function"===n.getType(i)?t in r&&(r[t]=i):r.setAttribute(t,i));for(var u,c=e.children,l=0;l<c.length;l++)if(u=c[l],["string","number"].indexOf(n.getType(u))>-1){var p=document.createTextNode(u);r.appendChild(p)}else{var h=a(u);r.appendChild(h)}return r}function l(e,t,i){var r=i.props.onremove,o=i.props.ondestroy;"function"===n.getType(r)&&r(t),e.removeChild(t),"function"===n.getType(o)&&o(t)}},h:function(e,n,i){return new t(e,n,i)}}});
